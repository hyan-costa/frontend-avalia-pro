<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Listar Projetos</title>
    <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-gray-100 p-6">
    <div class="max-w-7xl mx-auto">
        <div class="flex justify-between items-center mb-6">
            <h1 class="text-3xl font-bold text-gray-800">Lista Geral de Projetos</h1>
            <button onclick="window.location.href='#'" class="bg-blue-500 hover:bg-blue-600 text-white px-4 py-2 rounded-lg transition-colors">
                + Novo Projeto
            </button>
        </div>
        
        <div class="bg-white p-6 rounded-lg shadow-md mb-6">
            <h2 class="text-xl font-semibold text-gray-700 mb-4">Filtrar Projetos</h2>
            <div class="grid md:grid-cols-3 lg:grid-cols-5 gap-4">
                <input 
                    type="text" 
                    id="filtroTitulo"
                    placeholder="Por título do projeto" 
                    class="shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline focus:border-blue-500">
                
                <input 
                    type="text" 
                    id="filtroAreaTematica"
                    placeholder="Por área temática" 
                    class="shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline focus:border-blue-500">

                <input 
                    type="text" 
                    id="filtroAutor"
                    placeholder="Por nome do autor" 
                    class="shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline focus:border-blue-500">

                <select id="filtroStatusProjeto" class="shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 focus:outline-none focus:shadow-outline focus:border-blue-500">
                    <option value="">Todos os status</option>
                    <option value="Em Desenvolvimento">Em Desenvolvimento</option>
                    <option value="Submetido">Submetido</option>
                    <option value="Em Avaliação">Em Avaliação</option>
                    <option value="Aprovado">Aprovado</option>
                    <option value="Rejeitado">Rejeitado</option>
                    <option value="Concluído">Concluído</option>
                </select>

                <input 
                    type="text" 
                    id="filtroPremio"
                    placeholder="Por prêmio associado" 
                    class="shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline focus:border-blue-500">
            </div>
            <div class="mt-4">
                <button id="limparFiltros" class="bg-gray-500 hover:bg-gray-600 text-white font-bold py-2 px-4 rounded">
                    Limpar Filtros
                </button>
            </div>
        </div>

        <div class="mb-4">
            <span id="contadorResultados" class="text-gray-700 font-medium"></span>
        </div>
        
        <div class="bg-white rounded-lg shadow-md overflow-hidden">
            <div class="overflow-x-auto">
                <table class="min-w-full border-collapse">
                    <thead>
                        <tr class="bg-gray-200">
                            <th class="border border-gray-300 px-4 py-3 text-left font-semibold text-gray-700">Título</th>
                            <th class="border border-gray-300 px-4 py-3 text-left font-semibold text-gray-700">Área Temática</th>
                            <th class="border border-gray-300 px-4 py-3 text-left font-semibold text-gray-700">Autores</th>
                            <th class="border border-gray-300 px-4 py-3 text-left font-semibold text-gray-700 text-center">Data Envio</th>
                            <th class="border border-gray-300 px-4 py-3 text-left font-semibold text-gray-700">Status</th>
                            <th class="border border-gray-300 px-4 py-3 text-left font-semibold text-gray-700">Prêmio(s)</th>
                            <th class="border border-gray-300 px-4 py-3 text-left font-semibold text-gray-700">Ações</th>
                        </tr>
                    </thead>
                    <tbody id="tabelaProjetos">
                        </tbody>
                </table>
                <div id="semProjetos" class="text-center text-gray-500 py-8" style="display: none;">
                    Nenhum projeto encontrado com os filtros atuais.
                </div>
            </div>
        </div>
        
        <div class="flex justify-between items-center mt-6">
            <span id="infoPaginacao" class="text-gray-700"></span>
            <div class="flex gap-2">
                <button id="btnAnterior" class="bg-blue-500 hover:bg-blue-600 disabled:bg-gray-300 disabled:cursor-not-allowed text-white font-bold py-2 px-4 rounded-l transition-colors">
                    Anterior
                </button>
                <span id="numeroPagina" class="bg-gray-200 px-4 py-2 font-medium text-gray-700"></span>
                <button id="btnProximo" class="bg-blue-500 hover:bg-blue-600 disabled:bg-gray-300 disabled:cursor-not-allowed text-white font-bold py-2 px-4 rounded-r transition-colors">
                    Próximo
                </button>
            </div>
        </div>
    </div>

    <script>
        // Dados dos projetos (exemplo)
        const todosOsProjetos = [
            {
                id: 201, titulo: "Plataforma Colaborativa de Pesquisa", areaTematica: "Tecnologia da Informação",
                autores: [{ id: 1, nome: "João Carlos Silva" }, { id: 3, nome: "Pedro Henrique Oliveira" }],
                dataEnvio: "2025-02-10", statusProjeto: "Aprovado",
                premiosAssociados: [{ premioId: 1, nomePremio: "Prêmio Inovação Tech 2025" }]
            },
            {
                id: 101, titulo: "Sistema Inteligente de Irrigação Urbana", areaTematica: "Tecnologia e Sustentabilidade",
                autores: [{ id: 1, nome: "João Carlos Silva" }, { id: 6, nome: "Luciana Barbosa Mendes" }],
                dataEnvio: "2025-04-15", statusProjeto: "Em Avaliação",
                premiosAssociados: [{ premioId: 1, nomePremio: "Prêmio Inovação Tech 2025" }]
            },
            {
                id: 102, titulo: "Plataforma Educacional com IA", areaTematica: "Educação e Tecnologia",
                autores: [{ id: 2, nome: "Maria Fernanda Santos" }],
                dataEnvio: "2025-04-20", statusProjeto: "Submetido",
                premiosAssociados: [{ premioId: 1, nomePremio: "Prêmio Inovação Tech 2025" }]
            },
            {
                id: 202, titulo: "Estudo de Impacto Ambiental de Microplásticos", areaTematica: "Meio Ambiente",
                autores: [{ id: 7, nome: "Carlos Eduardo Rocha" }],
                dataEnvio: "2025-01-05", statusProjeto: "Concluído",
                premiosAssociados: [] // Sem prêmio associado
            },
            {
                id: 105, titulo: "App de Mobilidade Acessível", areaTematica: "Inclusão Social e Tecnologia",
                autores: [{ id: 4, nome: "Ana Clara Costa" }],
                dataEnvio: "2025-04-28", statusProjeto: "Em Desenvolvimento",
                premiosAssociados: []
            },
            {
                id: 103, titulo: "Energia Renovável Comunitária", areaTematica: "Sustentabilidade e Energia",
                autores: [{ id: 5, nome: "Roberto Lima Pereira" }, { id: 9, nome: "André Luiz Santos" }],
                dataEnvio: "2025-04-01", statusProjeto: "Rejeitado",
                premiosAssociados: [{ premioId: 1, nomePremio: "Prêmio Inovação Tech 2025" }]
            },
            {
                id: 203, titulo: "Análise Genômica de Doenças Raras", areaTematica: "Saúde e Biotecnologia",
                autores: [{ id: 8, nome: "Patricia Alves Campos" }, {id: 12, nome: "Juliana Costa Pereira"}],
                dataEnvio: "2024-11-15", statusProjeto: "Aprovado",
                premiosAssociados: [{ premioId: 4, nomePremio: "Prêmio Jovem Cientista 2024" }]
            },
             {
                id: 204, titulo: "Robótica Educacional para Ensino Fundamental", areaTematica: "Educação e Tecnologia",
                autores: [{ id: 10, nome: "Fernanda Silva Oliveira" }],
                dataEnvio: "2025-05-10", statusProjeto: "Em Desenvolvimento",
                premiosAssociados: []
            }
        ];

        let projetosFiltrados = [...todosOsProjetos];
        let paginaAtual = 1;
        const itensPorPagina = 5;

        function formatarDataSimples(dataString) {
            if (!dataString) return 'N/A';
            const data = new Date(dataString + 'T00:00:00');
            return data.toLocaleDateString('pt-BR');
        }

        function formatarListaAutores(autoresArray) {
            if (!autoresArray || autoresArray.length === 0) return 'N/A';
            return autoresArray.map(autor => autor.nome).join(', ');
        }
        
        function formatarListaPremios(premiosArray) {
            if (!premiosArray || premiosArray.length === 0) return 'Nenhum';
            return premiosArray.map(p => p.nomePremio).join(', ');
        }

        function getProjectStatusBadge(status) {
            let statusClass = '';
            switch(status) {
                case 'Em Desenvolvimento': statusClass = 'bg-yellow-100 text-yellow-700'; break;
                case 'Submetido': statusClass = 'bg-blue-100 text-blue-700'; break;
                case 'Em Avaliação': statusClass = 'bg-purple-100 text-purple-700'; break;
                case 'Aprovado': statusClass = 'bg-green-100 text-green-700'; break;
                case 'Rejeitado': statusClass = 'bg-red-100 text-red-700'; break;
                case 'Concluído': statusClass = 'bg-gray-100 text-gray-700'; break;
                default: statusClass = 'bg-gray-200 text-gray-600';
            }
            return `<span class="${statusClass} px-2 py-1 rounded-full text-xs font-medium">${status || 'N/Definido'}</span>`;
        }
        
        function renderizarTabela() {
            const tabelaCorpo = document.getElementById('tabelaProjetos');
            const semProjetosDiv = document.getElementById('semProjetos');

            if (projetosFiltrados.length === 0) {
                tabelaCorpo.innerHTML = '';
                semProjetosDiv.style.display = 'block';
                atualizarPaginacao();
                atualizarContador();
                return;
            }
            semProjetosDiv.style.display = 'none';

            const inicio = (paginaAtual - 1) * itensPorPagina;
            const fim = inicio + itensPorPagina;
            const projetosPagina = projetosFiltrados.slice(inicio, fim);

            tabelaCorpo.innerHTML = projetosPagina.map(projeto => {
                return `
                    <tr class="hover:bg-gray-50">
                        <td class="border border-gray-300 px-4 py-3 font-medium">${projeto.titulo}</td>
                        <td class="border border-gray-300 px-4 py-3">${projeto.areaTematica}</td>
                        <td class="border border-gray-300 px-4 py-3 text-sm">${formatarListaAutores(projeto.autores)}</td>
                        <td class="border border-gray-300 px-4 py-3 text-center">${formatarDataSimples(projeto.dataEnvio)}</td>
                        <td class="border border-gray-300 px-4 py-3">${getProjectStatusBadge(projeto.statusProjeto)}</td>
                        <td class="border border-gray-300 px-4 py-3 text-sm">${formatarListaPremios(projeto.premiosAssociados)}</td>
                        <td class="border border-gray-300 px-4 py-3">
                            <button onclick="visualizarDetalhesProjeto(${projeto.id})" class="text-blue-600 hover:text-blue-800 font-medium text-sm mr-2">
                                Detalhes
                            </button>
                            <button onclick="editarProjeto(${projeto.id})" class="text-green-600 hover:text-green-800 font-medium text-sm">
                                Editar
                            </button>
                        </td>
                    </tr>
                `;
            }).join('');

            atualizarPaginacao();
            atualizarContador();
        }

        function atualizarPaginacao() {
            const totalPaginas = Math.ceil(projetosFiltrados.length / itensPorPagina);
            const inicio = (paginaAtual - 1) * itensPorPagina + 1;
            const fim = Math.min(paginaAtual * itensPorPagina, projetosFiltrados.length);

            document.getElementById('infoPaginacao').textContent = 
                projetosFiltrados.length > 0 ? `Mostrando ${inicio} a ${fim} de ${projetosFiltrados.length} projetos` : 'Nenhum projeto encontrado';
            document.getElementById('numeroPagina').textContent = totalPaginas > 0 ? `${paginaAtual} / ${totalPaginas}` : '0 / 0';
            
            document.getElementById('btnAnterior').disabled = paginaAtual === 1;
            document.getElementById('btnProximo').disabled = paginaAtual === totalPaginas || totalPaginas === 0;
        }

        function atualizarContador() {
            const total = projetosFiltrados.length;
            const aprovados = projetosFiltrados.filter(p => p.statusProjeto === 'Aprovado').length;
            document.getElementById('contadorResultados').textContent = 
                `${total} projeto(s) encontrado(s) (${aprovados} aprovado(s)).`;
        }

        function aplicarFiltros() {
            const filtroTitulo = document.getElementById('filtroTitulo').value.toLowerCase();
            const filtroArea = document.getElementById('filtroAreaTematica').value.toLowerCase();
            const filtroAutor = document.getElementById('filtroAutor').value.toLowerCase();
            const filtroStatus = document.getElementById('filtroStatusProjeto').value;
            const filtroPremio = document.getElementById('filtroPremio').value.toLowerCase();

            projetosFiltrados = todosOsProjetos.filter(projeto => {
                const matchTitulo = projeto.titulo.toLowerCase().includes(filtroTitulo);
                const matchArea = projeto.areaTematica.toLowerCase().includes(filtroArea);
                const matchAutor = projeto.autores.some(autor => autor.nome.toLowerCase().includes(filtroAutor));
                const matchStatus = !filtroStatus || projeto.statusProjeto === filtroStatus;
                const matchPremio = !filtroPremio || (projeto.premiosAssociados && projeto.premiosAssociados.some(p => p.nomePremio.toLowerCase().includes(filtroPremio)));
                
                return matchTitulo && matchArea && matchAutor && matchStatus && matchPremio;
            });

            paginaAtual = 1;
            renderizarTabela();
        }

        function limparFiltros() {
            document.getElementById('filtroTitulo').value = '';
            document.getElementById('filtroAreaTematica').value = '';
            document.getElementById('filtroAutor').value = '';
            document.getElementById('filtroStatusProjeto').value = '';
            document.getElementById('filtroPremio').value = '';
            projetosFiltrados = [...todosOsProjetos];
            paginaAtual = 1;
            renderizarTabela();
        }

        function visualizarDetalhesProjeto(projetoId) {
            alert(`Visualizando detalhes do projeto ID: ${projetoId} (funcionalidade a ser implementada).`);
        }
        function editarProjeto(projetoId) {
            alert(`Editando projeto ID: ${projetoId} (funcionalidade a ser implementada).`);
        }

        // Event Listeners
        document.getElementById('filtroTitulo').addEventListener('input', aplicarFiltros);
        document.getElementById('filtroAreaTematica').addEventListener('input', aplicarFiltros);
        document.getElementById('filtroAutor').addEventListener('input', aplicarFiltros);
        document.getElementById('filtroStatusProjeto').addEventListener('change', aplicarFiltros);
        document.getElementById('filtroPremio').addEventListener('input', aplicarFiltros);
        document.getElementById('limparFiltros').addEventListener('click', limparFiltros);

        document.getElementById('btnAnterior').addEventListener('click', () => {
            if (paginaAtual > 1) {
                paginaAtual--;
                renderizarTabela();
            }
        });

        document.getElementById('btnProximo').addEventListener('click', () => {
            const totalPaginas = Math.ceil(projetosFiltrados.length / itensPorPagina);
            if (paginaAtual < totalPaginas) {
                paginaAtual++;
                renderizarTabela();
            }
        });

        // Inicialização
        document.addEventListener('DOMContentLoaded', () => {
            renderizarTabela();
        });
    </script>
</body>
</html>
